# WidgetTrial

## ウィジェット基本構成
### ■ AndroidManifest
追加するウィジェットプロバイダーを receiver として指定する必要がある。

また、ウィジェットの詳細設定を実装したい場合にも別アクティビティを用意し APPWIDGET_CONFIGURE として指定必要がある。

### ■ プロバイダー
ウィジェットまわりのコールバックをもつ基本クラス。

AppWidgetProvider を継承して個々のレイアウトの適応やイベントの処理などのメインロジックを実装していくことになる。

アプリ内で扱っている各種コールバック

■ onUpdate

以下のタイミングで呼ばれる
- プロバイダー設定で指定されたウィジェット更新間隔で更新される時
- ユーザがウィジェットを追加した時
- ウィジェットレイアウト上に定義したイベントが発火する時

■ onAppWidgetOptionsChanged

ウィジェットのサイズを変更するなどウィジェットに変更が加わった時に呼ばれる。

■ onDeleted

ウィジェットが削除される際に呼ばれる。

■ onEnabled

ウィジェットのインスタンスが作成された初回に呼ばれる。


### ■ プロバイダー設定
プロバイダーで反映するウィジェットの設定値を res/xml 配下に xml で定義する。

アプリ内で扱っている各属性

■ android:minWidth

ウィジェット幅の最小

■ android:minHeight

ウィジェット高さの最小

■ android:updatePeriodMillis

ウィジェットを更新する間隔をミリ秒で指定する

onUpdate コールバックが呼ばれる頻度にも関わるため頻度については考慮が必要

■ android:previewImage

ウィジェット作成時に表示するプレビュー画像を指定する

■ android:initialLayout

ウィジェットのレイアウトファイルを指定する

■ android:resizeMode

ウィジェットを水平方向、垂直方向それぞれにサイズ変更可能にする

■ android:widgetCategory

ウィジェットをホーム画面、またはロック画面に適応するかどうかを指定する

ロック画面に指定できるのは Android5.0以下のみ

### ■ レイアウト
activity や fragment 同様 xml で layout 配下に定義する。
ただし扱えるレイアウトコンポーネントは限定されているためドキュメントを要確認。
